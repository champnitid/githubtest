<!-- Google Map JavaScript API -->
<!DOCTYPE html>
<html lang = "en" style = "height: 100%; background-color: black;">

<head>
    <meta charset = "UTF-8">
    <meta name = "viewport" content = "width=device-width, initial-scale=1.0, user-scalable=no">
    <title>My Map - Current Location</title>

    <script
        async defer
        type = "text/javascript"
        src = "https://maps.googleapis.com/maps/api/js?key=AIzaSyAAtBDzzHCY8UtiHTlzwW9wo0pkCH6YUeQ&callback=initialize&language=en">
        // API Key : AIzaSyAAtBDzzHCY8UtiHTlzwW9wo0pkCH6YUeQ
    </script>

    <script>
        function initialize() {
            var mapOptions = { // กำหนดคุณสมบัติ
                center: new google.maps.LatLng(13.72647620563166, 100.50902959369438),
                zoom: 12, // (0-18)
                disableDefaultUI : true, // ปิด Control ทั้งหมด
                panControl : false,
                zoomControl : false,
                mapTypeControl : true,
                scaleControl : true,
                streetViewControl : false,
                overviewMapControl : true,
                mapTypeId : "custom_style"
            }

            var featureOpts = [ // Styles
                {
                    "elementType": "geometry",
                    "stylers": [
                    {
                        "color": "#ebe3cd"
                    }
                    ]
                },
                {
                    "elementType": "labels.text.fill",
                    "stylers": [
                    {
                        "color": "#523735"
                    }
                    ]
                },
                {
                    "elementType": "labels.text.stroke",
                    "stylers": [
                    {
                        "color": "#f5f1e6"
                    }
                    ]
                },
                {
                    "featureType": "administrative",
                    "elementType": "geometry.stroke",
                    "stylers": [
                    {
                        "color": "#c9b2a6"
                    }
                    ]
                },
                {
                    "featureType": "administrative.land_parcel",
                    "elementType": "geometry.stroke",
                    "stylers": [
                    {
                        "color": "#dcd2be"
                    }
                    ]
                },
                {
                    "featureType": "administrative.land_parcel",
                    "elementType": "labels.text.fill",
                    "stylers": [
                    {
                        "color": "#ae9e90"
                    }
                    ]
                },
                {
                    "featureType": "landscape.natural",
                    "elementType": "geometry",
                    "stylers": [
                    {
                        "color": "#dfd2ae"
                    }
                    ]
                },
                {
                    "featureType": "poi",
                    "elementType": "geometry",
                    "stylers": [
                    {
                        "color": "#dfd2ae"
                    }
                    ]
                },
                {
                    "featureType": "poi",
                    "elementType": "labels.text.fill",
                    "stylers": [
                    {
                        "color": "#93817c"
                    }
                    ]
                },
                {
                    "featureType": "poi.park",
                    "elementType": "geometry.fill",
                    "stylers": [
                    {
                        "color": "#a5b076"
                    }
                    ]
                },
                {
                    "featureType": "poi.park",
                    "elementType": "labels.text.fill",
                    "stylers": [
                    {
                        "color": "#447530"
                    }
                    ]
                },
                {
                    "featureType": "road",
                    "elementType": "geometry",
                    "stylers": [
                    {
                        "color": "#f5f1e6"
                    }
                    ]
                },
                {
                    "featureType": "road.arterial",
                    "elementType": "geometry",
                    "stylers": [
                    {
                        "color": "#fdfcf8"
                    }
                    ]
                },
                {
                    "featureType": "road.highway",
                    "elementType": "geometry",
                    "stylers": [
                    {
                        "color": "#f8c967"
                    }
                    ]
                },
                {
                    "featureType": "road.highway",
                    "elementType": "geometry.stroke",
                    "stylers": [
                    {
                        "color": "#e9bc62"
                    }
                    ]
                },
                {
                    "featureType": "road.highway.controlled_access",
                    "elementType": "geometry",
                    "stylers": [
                    {
                        "color": "#e98d58"
                    }
                    ]
                },
                {
                    "featureType": "road.highway.controlled_access",
                    "elementType": "geometry.stroke",
                    "stylers": [
                    {
                        "color": "#db8555"
                    }
                    ]
                },
                {
                    "featureType": "road.local",
                    "elementType": "labels.text.fill",
                    "stylers": [
                    {
                        "color": "#806b63"
                    }
                    ]
                },
                {
                    "featureType": "transit.line",
                    "elementType": "geometry",
                    "stylers": [
                    {
                        "color": "#dfd2ae"
                    }
                    ]
                },
                {
                    "featureType": "transit.line",
                    "elementType": "labels.text.fill",
                    "stylers": [
                    {
                        "color": "#8f7d77"
                    }
                    ]
                },
                {
                    "featureType": "transit.line",
                    "elementType": "labels.text.stroke",
                    "stylers": [
                    {
                        "color": "#ebe3cd"
                    }
                    ]
                },
                {
                    "featureType": "transit.station",
                    "elementType": "geometry",
                    "stylers": [
                    {
                        "color": "#dfd2ae"
                    }
                    ]
                },
                {
                    "featureType": "water",
                    "elementType": "geometry.fill",
                    "stylers": [
                    {
                        "color": "#b9d3c2"
                    }
                    ]
                },
                {
                    "featureType": "water",
                    "elementType": "labels.text.fill",
                    "stylers": [
                    {
                        "color": "#92998d"
                    }
                    ]
                }
            ];

            var styledMapOptions = {name : "Custom Style"}; // กำหนดชื่อให้ Styles
            var customMapType = new google.maps.StyledMapType(featureOpts, styledMapOptions); // สร้าง object ของ Styles
            var map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions); // สร้างแผนที่
            map.mapTypes.set("custom_style", customMapType);

            // Use Geolocation API to get the user's current position
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const userLocation = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude
                        };

                        // Set the map's center to the user's location
                        map.setCenter(userLocation);

                        // Add a marker to the user's location
                        var image1 = "images/img1.png";
                        var marker1 = new google.maps.Marker({ // MARKER
                            position : userLocation,
                            map : map,
                            title : "You are here",
                            draggable : true,
                            icon : image1,
                            animation : google.maps.Animation.BOUNCE
                        });
                        // marker.setMap(null); // ลบ Marker

                        var content1 = '<img src = "images/champ.jpg" width = "50" height = "50">' + '<div>Hello Bangkok, I am here.</div>' + '<strong>Website</strong> : <a href = "http://www.soccersuck.com" target = "_blank">SoccerSuck</a>';
                        var infowindow1 = new google.maps.InfoWindow({content: content1}); // INFO WINDOW
                        google.maps.event.addListener(marker1, "click", function() {
                            infowindow2.close();
                            infowindow3.close();
                            infowindow4.close();
                            infowindow1.open(map, marker1);
                        });

                        var image2 = "images/img2.png";
                        var marker2 = new google.maps.Marker({
                            position : new google.maps.LatLng(13.745616666737593, 100.53411930057939),
                            map : map,
                            title : "สถานีสยาม",
                            draggable : false,
                            icon : image2,
                            animation : google.maps.Animation.DROP
                        });
                        // marker.setMap(null);

                        var content2 = '<img src = "images/siam.jpg" width = "50" height = "50">' + '<div>Hello Siam.</div>' + '<strong>สถานที่ท่องเที่ยว</strong> : <a href = "https://siam-square.com" target = "_blank">Siam Square</a>';
                        var infowindow2 = new google.maps.InfoWindow({content: content2});
                        google.maps.event.addListener(marker2, "click", function() {
                            infowindow1.close();
                            infowindow3.close();
                            infowindow4.close();
                            infowindow2.open(map, marker2);
                        });

                        var image3 = "images/img3.png";
                        var marker3 = new google.maps.Marker({
                            position : new google.maps.LatLng(13.730420263155601, 100.56969994433867),
                            map : map,
                            title : "สถานีพร้อมพงษ์",
                            draggable : false,
                            icon : image3,
                            animation : google.maps.Animation.DROP
                        });
                        // marker.setMap(null);

                        var content3 = '<img src = "images/emsphere.jpg" width = "50" height = "50">' + '<div>Hello Phrom Phong.</div>' + '<strong>สถานที่ท่องเที่ยว</strong> : <a href = "https://emdistrict.com" target = "_blank">EM District</a>';
                        var infowindow3 = new google.maps.InfoWindow({content: content3});
                        google.maps.event.addListener(marker3, "click", function() {
                            infowindow1.close();
                            infowindow2.close();
                            infowindow4.close();
                            infowindow3.open(map, marker3);
                        });

                        var image4 = "images/img4.png";
                        var marker4 = new google.maps.Marker({
                            position : new google.maps.LatLng(13.742039943277591, 100.51020994753102),
                            map : map,
                            title : "สถานีวัดมังกร",
                            draggable : false,
                            icon : image4,
                            animation : google.maps.Animation.DROP
                        });
                        // marker.setMap(null);

                        var content4 = '<img src = "images/chinatown.jpg" width = "50" height = "50">' + '<div>Hello Wat Mangkon.</div>' + '<strong>สถานที่ท่องเที่ยว</strong> : <a href = "https://www.wonderfulpackage.com/article/v/1629/" target = "_blank">Chinatown</a>';
                        var infowindow4 = new google.maps.InfoWindow({content: content4});
                        google.maps.event.addListener(marker4, "click", function() {
                            infowindow1.close();
                            infowindow2.close();
                            infowindow3.close();
                            infowindow4.open(map, marker4);
                        });
                    },
                    () => {
                        alert("Geolocation failed. Please enable location access.");
                    }
                );
            }
            else {
                alert("Geolocation is not supported by this browser.");
            }
        }
        // google.maps.event.addDomListener(window, "load", initialize); // แสดงผลบนหน้าเว็บ
    </script>
</head>

<body style = "height: 90%;">
    <div id = "map-canvas" style = "height: 100%; width: 100%;"></div>
    <a href = "index.html"><h1 style = "text-align: center; color: tomato;">My Map</h1></a>
</body>

</html>
